{% extends 'pirostagram/base.html' %}
{% load static %}

{% block content %}
<div class="post-detail-container">
    <header class="detail-header">
        <button onclick="history.back()" class="back-btn">
            <img src="{% static 'icons/goBack.svg' %}" alt="ë’¤ë¡œê°€ê¸°">
        </button>
        <h1>ê²Œì‹œë¬¼</h1>
    </header>

    <div class="post-detail-content">
        <div class="post-image-container">
            <img src="{{ post.image.url }}" alt="ê²Œì‹œë¬¼ ì´ë¯¸ì§€">
        </div>
        
        <div class="post-actions">
            <div class="like-section">
                <button class="like-btn {% if request.user in post.likes.all %}active{% endif %}" 
                        data-post-id="{{ post.id }}">
                    {% if request.user in post.likes.all %}
                        â¤ï¸ ì¢‹ì•„ìš” {{ post.likes.count }}ê°œ
                    {% else %}
                        ğŸ¤ ì¢‹ì•„ìš”
                    {% endif %}
                </button>
            </div>
        </div>
        <div class="comments-section">
          <div class="comments-container">
              {% for comment in post.comments.all reversed %}
              <div class="comment" id="comment-{{ comment.id }}">
                  <span class="comment-content">
                      <strong>{{ comment.author.username }}</strong> {{ comment.content }}
                  </span>
                  {% if user == comment.author %}
                  <button class="delete-comment-btn" data-comment-id="{{ comment.id }}">ì‚­ì œ</button>
                  {% endif %}
              </div>
              {% endfor %}
          </div>
          
          <form class="comment-form">
              {% csrf_token %}
              <input type="text" name="content" placeholder="ëŒ“ê¸€ ë‹¬ê¸°...">
              <button type="submit" class="post-comment-btn">ê²Œì‹œ</button>
          </form>
      </div>
        
    </div>
</div>
{% endblock %}